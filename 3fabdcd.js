(window.webpackJsonp=window.webpackJsonp||[]).push([[12,8],{295:function(t,e,n){"use strict";n.r(e);n(14),n(35),n(284),n(189),n(252),n(257),n(32),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(33),n(47),n(49),n(40);var l=n(282),r=n.n(l),o=n(283),c=n(256),f={components:{ProductListItem:o.default},emits:["availableFilterOptionsChanged","numberOfResultsChanged"],data:function(){return{products:[],filters:{},productsAvailableFilterOptions:{},freezeProductFiltering:!1,numberOfResults:null}},created:function(){var t=this;this.debouncedUpdateAvailableFilterOptionsChanged=r.a.debounce((function(){var e=function(t){return"allDateRanges"===t||"availableDateRanges"===t},n=0,l={};Object.values(t.productsAvailableFilterOptions).forEach((function(t){Object.entries(t).forEach((function(t){var r=t[0];if("numberOfResults"===r){var o=Number(t[1]);n+=isNaN(o)?0:o}else{var c=t[1]||[];l[r]?c.forEach((function(t){l[r].add(e(r)?t:JSON.stringify(t))})):l[r]=e(r)?new Set(c):new Set(c.map((function(t){return JSON.stringify(t)})))}}))})),this.numberOfResults=n,Object.entries(l).forEach((function(t){var n=t[0];if(e(n))return null;var r=t[1],o=Array.from(r).map((function(t){return JSON.parse(t)})),c=new Set(o);l[n]=c})),t.$emit("availableFilterOptionsChanged",l),this.freezeProductFiltering||this.$emit("numberOfResultsChanged",this.numberOfResults)}),100)},mounted:function(){this.loadProducts()},methods:{loadProducts:function(){var t=this,e=function(){t.products=[]},n=Object(c.d)(),l=function(t){var e=String(t.id);return!n.has(e)},r=Object(c.c)();r?this.$axios.get("https://dev.wirtschaftswunder.digital/api/open_v1/products/index?anbieter_id="+r).then((function(n){200===(null==n?void 0:n.status)?t.products=Array.isArray(n.data)?n.data.filter(l):[]:e()})).catch(e):e()},applyFilters:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.freezeProductFiltering=e,this.filters=t},updateListOfAllAvailableFilterOptions:function(t,e){this.productsAvailableFilterOptions[t]=e,this.debouncedUpdateAvailableFilterOptionsChanged()}}},d=f,h=n(46),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col gap-5 md:gap-12"},t._l(t.products,(function(e){return n("product-list-item",{key:e.id,ref:String(e.id),refInFor:!0,attrs:{"product-data":e,filters:t.filters,"freeze-product-filtering":t.freezeProductFiltering},on:{availableFilterOptionsChanged:t.updateListOfAllAvailableFilterOptions}})})),1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ProductListItem:n(283).default})},307:function(t,e,n){t.exports={}},308:function(t,e,n){t.exports={}},309:function(t,e,n){t.exports={}},310:function(t,e,n){t.exports={}},311:function(t,e,n){t.exports={}},330:function(t,e,n){"use strict";n(307)},331:function(t,e,n){"use strict";n(308)},332:function(t,e,n){"use strict";n(309)},333:function(t,e,n){"use strict";n(310)},334:function(t,e,n){"use strict";n(311)},335:function(t,e,n){"use strict";n.r(e);n(76);var l=n(282),r=n.n(l),o=n(312),c=n(295),f=n(256),d={name:"IndexPage",components:{productList:c.default,FilterMenu:o.default},data:function(){return{filters:{},freezeProductFiltering:!1,numberOfResults:null,loadingNewNumberOfResults:!1,filterBgImgSrcUrl:null}},watch:{numberOfResults:function(t,e){var n=this;t!==e&&(this.loadingNewNumberOfResults=!0,setTimeout((function(){n.loadingNewNumberOfResults=!1}),1e3))}},created:function(){this.filterBgImgSrcUrl=Object(f.a)();var t=this;this.debouncedUpdateProductList=r.a.debounce((function(){t.$refs.productList.applyFilters(t.filters,t.freezeProductFiltering)}),100)},methods:{updateFilters:function(t,e){this.filters=t,this.freezeProductFiltering=!!e,e||(this.numberOfResults=null),this.debouncedUpdateProductList()},setNumberOfResults:function(t){this.numberOfResults=t}}},h=(n(330),n(331),n(332),n(333),n(334),n(46)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app lg:container lg:px-2 lg:mx-auto overflow-hidden lg:pb-10",attrs:{id:"product-finder"}},[n("div",{staticClass:"\n      bg-booking-light\n      mx-auto\n      lg:mt-10 lg:rounded-lg\n      shadow-lg\n      max-w-5xl\n      overflow-hidden\n      relative\n      pb-8\n    "},[n("div",{staticClass:"w-full mb-2"},[n("div",{staticClass:"w-full sm:h-72 relative pt-24 sm:pt-0"},[n("div",{staticClass:"skeleton-loading absolute left-0 top-0 w-full h-full"}),t._v(" "),n("img",{staticClass:"object-cover absolute top-0 left-0 w-full h-full min-h-full",attrs:{src:t.filterBgImgSrcUrl}}),t._v(" "),n("div",{staticClass:"\n            absolute\n            top-1/3\n            left-0\n            w-full\n            bottom-0\n            bg-gradient-to-b\n            from-transparent\n            to-booking-light\n          "}),t._v(" "),n("div",{staticClass:"sm:py-5 relative sm:absolute left-0 w-full bottom-0 py-4 _px"},[n("filter-menu",{ref:"filterMenu",on:{filtersChanged:t.updateFilters},model:{value:t.filters,callback:function(e){t.filters=e},expression:"filters"}})],1),t._v(" "),n("div",{staticClass:"absolute w-full top-0 left-0 _px"},[n("div",{staticClass:"\n              rounded-full\n              bg-boxColor\n              relative\n              top-5\n              w-20\n              h-20\n              flex flex-col\n              items-center\n              justify-center\n              shadow-lg\n              border border-solid border-gray-300\n              text-accentColor-light\n            ",class:{rotate:t.loadingNewNumberOfResults}},[n("div",{staticClass:"contents"},[n("span",{staticClass:"text-4xl font-bold"},[t._v(t._s(t.numberOfResults))])])])])])]),t._v(" "),n("div",{staticClass:"py-2 sm:py-5 _px"},[n("product-list",{ref:"productList",on:{availableFilterOptionsChanged:function(e){return t.$refs.filterMenu.updateAvailableFilterOptions(e)},numberOfResultsChanged:t.setNumberOfResults}})],1)])])}),[],!1,null,"0fb0be19",null);e.default=component.exports;installComponents(component,{FilterMenu:n(312).default,ProductList:n(295).default})}}]);